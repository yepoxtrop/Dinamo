generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
}

model configuracion_firmas {
  configuracion_firma_id        Int            @id(map: "pk_configuracion_firma") @default(autoincrement())
  configuracion_firma_version   String         @default("X.509", map: "DF__configura__confi__3E1D39E1") @db.NVarChar(100)
  configuracion_firma_serie     String         @db.NVarChar(100)
  configuracion_firma_algoritmo String         @default("rsa", map: "DF__configura__confi__3F115E1A") @db.NVarChar(100)
  configuracion_firma_emisor    String         @db.NVarChar(300)
  configuracion_firma_cn        String         @db.NVarChar(300)
  configuracion_firma_o         String         @db.NVarChar(100)
  configuracion_firma_ou        String         @db.NVarChar(100)
  configuracion_firma_i         String         @db.NVarChar(100)
  configuracion_firma_st        String         @db.NVarChar(100)
  configuracion_firma_c         String         @db.NVarChar(100)
  firma_id_fk                   Int
  version_firma_id_fk           Int
  firmas                        firmas         @relation(fields: [firma_id_fk], references: [firma_id], onUpdate: NoAction, map: "fk_firma_en_configuracion_firma")
  version_firmas                version_firmas @relation(fields: [version_firma_id_fk], references: [version_firma_id], onUpdate: NoAction, map: "fk_version_firma")
}

model contrasenas_firmas {
  contrasena_firma_id    Int    @id(map: "pk_contrasena_firma") @default(autoincrement())
  contrasena_firma_valor String
  firma_id_fk            Int    @unique(map: "UQ__contrase__2872F92C438439D9")
  firmas                 firmas @relation(fields: [firma_id_fk], references: [firma_id], onUpdate: NoAction, map: "fk_firma_en_contrasena_firma")
}

model correos_enviados {
  correo_enviado_id     Int           @id(map: "pk_correo_usado") @default(autoincrement())
  correo_enviado_fecha  DateTime
  correo_enviado_cuerpo String        @db.NVarChar(Max)
  usuario_id_fk         Int
  tipo_correo_id_fk     Int
  tipos_correos         tipos_correos @relation(fields: [tipo_correo_id_fk], references: [tipo_correo_id], onUpdate: NoAction, map: "fk_tipo_correo_en_correo_enviado")
  usuarios              usuarios      @relation(fields: [usuario_id_fk], references: [usuario_id], onUpdate: NoAction, map: "fk_usuario_en_correo_enviado")
}

model datos_certificados {
  dato_certificado_id        Int                  @id(map: "pk_datos_certificados") @default(autoincrement())
  dato_certificado_version   String               @default("X.509", map: "DF__datos_cer__dato___236943A5") @db.NVarChar(100)
  dato_certificado_serie     String               @db.NVarChar(100)
  dato_certificado_algoritmo String               @default("rsa", map: "DF__datos_cer__dato___245D67DE") @db.NVarChar(100)
  dato_certificado_emisor    String               @db.NVarChar(300)
  dato_certificado_cn        String               @db.NVarChar(300)
  dato_certificado_o         String               @db.NVarChar(100)
  dato_certificado_ou        String               @db.NVarChar(100)
  dato_certificado_i         String               @db.NVarChar(100)
  dato_certificado_st        String               @db.NVarChar(100)
  dato_certificado_c         String               @db.NVarChar(100)
  dato_certificado_estado    Boolean
  documento_validado_fk      Int
  documentos_validados       documentos_validados @relation(fields: [documento_validado_fk], references: [documento_validado_id], onUpdate: NoAction, map: "fk_documento_validado_en_dato_certificado")
}

model documentos_firmados {
  documento_firmado_id        Int      @id(map: "pk_archivo") @default(autoincrement())
  documento_firmado_ubicacion String   @db.NVarChar(Max)
  documento_firmado_fecha     DateTime
  firma_id_fk                 Int
  firmas                      firmas   @relation(fields: [firma_id_fk], references: [firma_id], onUpdate: NoAction, map: "fk_firma_en_archivos_firmados")
}

model documentos_validados {
  documento_validado_id        Int                   @id(map: "pk_documento_validado") @default(autoincrement())
  documento_validado_ubicacion String                @db.NVarChar(Max)
  documento_validado_estado    Boolean
  peticion_validacion_id_fk    Int
  datos_certificados           datos_certificados[]
  peticiones_validacion        peticiones_validacion @relation(fields: [peticion_validacion_id_fk], references: [peticion_validacion_id], onUpdate: NoAction, map: "fk_peticion_validacion_en_documento_validado")
}

model firmas {
  firma_id                Int                    @id(map: "pk_firma") @default(autoincrement())
  firma_pub               String                 @db.NVarChar(Max)
  firma_csr               String                 @db.NVarChar(Max)
  firma_crt               String                 @db.NVarChar(Max)
  firma_p12               String                 @db.NVarChar(Max)
  firma_fecha_creacion    DateTime
  firma_fecha_vencimiento DateTime
  firma_estado            Boolean
  usuario_id_fk           Int
  tipo_firma_id_fk        Int
  configuracion_firmas    configuracion_firmas[]
  contrasenas_firmas      contrasenas_firmas?
  documentos_firmados     documentos_firmados[]
  tipo_firmas             tipo_firmas            @relation(fields: [tipo_firma_id_fk], references: [tipo_firma_id], onUpdate: NoAction, map: "fk_tipo_firma_en_firma")
  usuarios                usuarios               @relation(fields: [usuario_id_fk], references: [usuario_id], onUpdate: NoAction, map: "fk_usuario_en_firma")
  llaves_privadas         llaves_privadas?
}

model llaves_privadas {
  llave_id    Int    @id(map: "pk_llave") @default(autoincrement())
  llave_valor String @db.NVarChar(Max)
  firma_id_fk Int    @unique(map: "UQ__llaves_p__2872F92C78DE71BA")
  firmas      firmas @relation(fields: [firma_id_fk], references: [firma_id], onUpdate: NoAction, map: "fk_firmas_en_llave_privada")
}

model peticiones_validacion {
  peticion_validacion_id     Int                    @id(map: "pk_peticion_validacion") @default(autoincrement())
  peticion_validacion_fecha  DateTime               @db.DateTime
  peticion_validacion_nombre String                 @db.NVarChar(300)
  usuario_id_fk              Int
  documentos_validados       documentos_validados[]
  usuarios                   usuarios               @relation(fields: [usuario_id_fk], references: [usuario_id], onUpdate: NoAction, map: "fk_usuario_en_peticion_validacion")
  reportes                   reportes[]
}

model reportes {
  reporte_id                Int                   @id(map: "pk_reporte") @default(autoincrement())
  reporte_ubicacion         String                @db.NVarChar(Max)
  reporte_fecha             DateTime
  peticion_validacion_id_fk Int
  tipo_reporte_id_fk        Int
  peticiones_validacion     peticiones_validacion @relation(fields: [peticion_validacion_id_fk], references: [peticion_validacion_id], onUpdate: NoAction, map: "fk_peticion_validacion_en_reporte")
  tipo_reportes             tipo_reportes         @relation(fields: [tipo_reporte_id_fk], references: [tipo_reporte_id], onUpdate: NoAction, map: "fk_tipo_reporte_en_reporte")
}

model roles {
  rol_id          Int        @id(map: "pk_rol") @default(autoincrement())
  rol_nombre      String     @unique(map: "UQ__roles__4900B49A99D98291") @db.VarChar(50)
  rol_descripcion String     @db.NVarChar(300)
  usuarios        usuarios[]
}

model sesiones {
  sesion_id          Int      @id(map: "pk_sesion") @default(autoincrement())
  sesion_fecha       DateTime
  sesion_dispositivo String   @db.VarChar(50)
  usuario_id_fk      Int
  usuarios           usuarios @relation(fields: [usuario_id_fk], references: [usuario_id], onUpdate: NoAction, map: "fk_usuario_en_inicio_sesion")
}

model tipo_firmas {
  tipo_firma_id          Int      @id(map: "pk_tipo_firma") @default(autoincrement())
  tipo_firma_nombre      String   @unique(map: "UQ__tipo_fir__1557963A7A74E6C5") @db.NVarChar(30)
  tipo_firma_descripcion String   @db.NVarChar(300)
  firmas                 firmas[]
}

model tipo_reportes {
  tipo_reporte_id          Int        @id(map: "pk_tipo_reporte") @default(autoincrement())
  tipo_reporte_nombre      String     @unique(map: "UQ__tipo_rep__910808BDAC927371") @db.VarChar(50)
  tipo_reporte_descripcion String     @db.NVarChar(300)
  reportes                 reportes[]
}

model tipos_correos {
  tipo_correo_id          Int                @id(map: "pk_tipo_correo") @default(autoincrement())
  tipo_correo_nombre      String             @unique(map: "UQ__tipos_co__AD329B0A0A69FB4D") @db.VarChar(50)
  tipo_correo_descripcion String             @db.NVarChar(300)
  correos_enviados        correos_enviados[]
}

model tokens {
  token_id       Int      @id(map: "pk_token") @default(autoincrement())
  token_valor    String   @db.NVarChar(2000)
  token_duracion String   @default("1 hora", map: "DF__tokens__token_du__123EB7A3") @db.VarChar(50)
  usuario_id_fk  Int
  usuarios       usuarios @relation(fields: [usuario_id_fk], references: [usuario_id], onUpdate: NoAction, map: "fk_usuario_en_tokens")
}

model usuarios {
  usuario_id            Int                     @id(map: "pk_usuario") @default(autoincrement())
  usuario_nombre        String                  @unique(map: "UQ__usuarios__220D44A2BC6B5ADB") @db.VarChar(50)
  rol_id_fk             Int                     @default(4, map: "DF__usuarios__rol_id__04E4BC85")
  correos_enviados      correos_enviados[]
  firmas                firmas[]
  peticiones_validacion peticiones_validacion[]
  sesiones              sesiones[]
  tokens                tokens[]
  roles                 roles                   @relation(fields: [rol_id_fk], references: [rol_id], onUpdate: NoAction, map: "fk_rol_en_usuarios")
}

model version_firmas {
  version_firma_id          Int                    @id(map: "pk_version_firma") @default(autoincrement())
  version_firma_nombre      String                 @unique(map: "UQ__version___FD908468D566A588") @db.NVarChar(50)
  version_firma_descripcion String                 @db.NVarChar(300)
  configuracion_firmas      configuracion_firmas[]
}
